<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>ubuntu下openpose本地环境搭建 | 青岛科技大学信息学院科技创新协会</title><meta name="description" content="经验分享"><meta name="keywords" content="-经验分享"><meta name="author" content="QUST-Coder"><meta name="copyright" content="QUST-Coder"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="https://i.loli.net/2019/08/09/hCaYFbMg2jXTSmD.png"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="canonical" href="http://qustkx.com/2019/08/21/openpose/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="ubuntu下openpose本地环境搭建"><meta name="twitter:description" content="经验分享"><meta name="twitter:image" content="https://img-blog.csdnimg.cn/201906161628345.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwNzMyMDkz,size_16,color_FFFFFF,t_70"><meta property="og:type" content="article"><meta property="og:title" content="ubuntu下openpose本地环境搭建"><meta property="og:url" content="http://qustkx.com/2019/08/21/openpose/"><meta property="og:site_name" content="青岛科技大学信息学院科技创新协会"><meta property="og:description" content="经验分享"><meta property="og:image" content="https://img-blog.csdnimg.cn/201906161628345.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwNzMyMDkz,size_16,color_FFFFFF,t_70"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="prev" title="新生答疑会主要问题汇总" href="http://qustkx.com/2019/09/07/qa/"><link rel="next" title="图书搜索" href="http://qustkx.com/2019/08/17/blog5/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'true',
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: '添加书签',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天'

  
}</script><link rel="alternate" href="/atom.xml" title="青岛科技大学信息学院科技创新协会" type="application/atom+xml">
</head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#一．CUDA10-1的安装"><span class="toc-number">1.</span> <span class="toc-text">一．CUDA10.1的安装</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#二．cuDNN的安装"><span class="toc-number">2.</span> <span class="toc-text">二．cuDNN的安装</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#三．Pytorch1-0的安装"><span class="toc-number">3.</span> <span class="toc-text">三．Pytorch1.0的安装</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#四．Caffe的安装"><span class="toc-number">4.</span> <span class="toc-text">四．Caffe的安装</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#五．Opencv3-4的安装"><span class="toc-number">5.</span> <span class="toc-text">五．Opencv3.4的安装</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#六．Openpose的安装"><span class="toc-number">6.</span> <span class="toc-text">六．Openpose的安装</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#七-安装cmake-gui"><span class="toc-number">7.</span> <span class="toc-text">七.安装cmake-gui</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#八-启动cmake-gui进行编译"><span class="toc-number">8.</span> <span class="toc-text">八.启动cmake-gui进行编译</span></a></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://img-blog.csdnimg.cn/201906161628345.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwNzMyMDkz,size_16,color_FFFFFF,t_70)"><div id="page-header"><span class="pull-left"> <a class="blog_title" id="site-name" href="/">青岛科技大学信息学院科技创新协会</a></span><div class="open toggle-menu pull-right"><div class="menu-icon-first"></div><div class="menu-icon-second"></div><div class="menu-icon-third"></div></div><span class="pull-right menus"><div class="mobile_author_icon"><img class="lozad" data-src="https://i.loli.net/2019/08/09/QEhLdt6FND5eoOs.jpg" onerror="onerror=null;src='https://i.loli.net/2019/08/12/NpZmDsf8Q492uYb.png'"><div class="mobile_author-info__description"></div></div><hr><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a><a class="site-page" href="/archives/index.html"><i class="fa-fw fa fa-archive"></i><span> 目录</span></a><a class="site-page" href="/class"><i class="fa-fw fa fa-archive"></i><span> 查询分班</span></a><a class="site-page" href="http://www.iqust.top/dorm"><i class="fa-fw fa fa-archive"></i><span> 宿舍分布情况</span></a><script>document.body.addEventListener('touchstart', function(){ });</script></div></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title"><div class="posttitle">ubuntu下openpose本地环境搭建</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2019-08-21<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2019-08-30</time></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><p>ubuntu下openpose本地环境搭建</p>
<p>因为装得是ubuntu18.04的系统，所以很多坑都得自己慢慢来踩，从中也是学习到了不少，下面依次来介绍边缘端的环境搭配在这里先放出我最终搭建好的环境，nvidia driver：418.74，CUDA version：10.1 cudnn10.1</p>
<p><img src="https://img-blog.csdnimg.cn/20190616162159313.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwNzMyMDkz,size_16,color_FFFFFF,t_70" alt></p>
<h1 id="一．CUDA10-1的安装"><a href="#一．CUDA10-1的安装" class="headerlink" title="一．CUDA10.1的安装"></a>一．CUDA10.1的安装</h1><p>首先是最基本的显卡驱动安装<br>关于显卡驱动安装，网上有很多种方法，其中最简单的应该就是添加官方ppa源，然后直接用apt-git安装了</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo add-apt-repository ppa:graphics-drivers/ppa</span><br></pre></td></tr></table></figure>

<p>需要输入密码并按enter键确认。<br>之后刷新软件库并安装最新驱动。 </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update </span><br><span class="line">$ sudo apt-get install nvidia-367nvidia-settings nvidia-prime</span><br></pre></td></tr></table></figure>

<p> 安装完成后通过下面命令查看是否安装成功。<br> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nvidia-settings</span><br></pre></td></tr></table></figure></p>
<p> 但是你会发现，比较新的显卡驱动在官方ppa源里面是没有的，这时候就要去官网找自己的GPU的相应驱动程序了<br><a href="https://www.geforce.cn/drivers" target="_blank" rel="noopener">https://www.geforce.cn/drivers</a><br><img src="https://img-blog.csdnimg.cn/20190616162402254.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwNzMyMDkz,size_16,color_FFFFFF,t_70" alt><br><img src="https://img-blog.csdnimg.cn/20190616162500806.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwNzMyMDkz,size_16,color_FFFFFF,t_70" alt><br>搜索后得到观看CUDA10.1的官方文档可知CUDA10.1仅支持显卡驱动版本大于418.39机器，所以挑一个版本号大于418.39非beta版的进行下载</p>
<p><img src="https://img-blog.csdnimg.cn/20190616162533406.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwNzMyMDkz,size_16,color_FFFFFF,t_70" alt><br>下载完成后我们开始准备工作卸载可能存在的旧版本 nvidia 驱动（对没有安装过 nvidia 驱动的主机，这步可以省略，但推荐执行，无害）</p>
<p>安装驱动可能需要的依赖(可选)</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$sudo</span> apt-get update </span><br><span class="line"><span class="variable">$sudo</span> apt-get install dkms build-essential linux-headers-generic </span><br><span class="line">把 nouveau 驱动加入黑名单</span><br><span class="line"><span class="variable">$sudo</span> vim /etc/modprobe.d/blacklist-nouveau.conf</span><br></pre></td></tr></table></figure>

<p>在文件 blacklist-nouveau.conf 中加入如下内容： </p>
<blockquote>
<p>blacklist nouveau<br>blacklist lbm-nouveau<br>options nouveau modeset=0<br>alias nouveau off<br>alias lbm-nouveau off </p>
</blockquote>
<p>禁用 nouveau 内核模块</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$echo</span> options nouveau modeset=0 | sudo tee -a /etc/modprobe.d/nouveau-kms.conf </span><br><span class="line"><span class="variable">$sudo</span> update-initramfs -u</span><br></pre></td></tr></table></figure>

<p>然后按ctrl+alt+f5进入字符终端界面，这里必须注意，只有进入字符终端才能进行安装，否则会安装失败报错<br>更改安装文件的权限（否则会报错无此命令）</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$sudo</span> chmod u+x NVIDIA-Linux-x86_64-418.74.run</span><br></pre></td></tr></table></figure>

<p>最后安装</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$sudo</span> ./NVIDIA-Linux-x86_64-418.74.run</span><br></pre></td></tr></table></figure>

<p>安装一开始可能会提示脚本运行失败，继续就可以了</p>
<p>至此，显卡驱动已经安装成功，现在开始CUDA10.1的安装<br>首先去CUDA官网寻找安装包<br><a href="https://developer.nvidia.com/cuda-downloads" target="_blank" rel="noopener">https://developer.nvidia.com/cuda-downloads</a><br><img src="https://img-blog.csdnimg.cn/20190616162602355.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwNzMyMDkz,size_16,color_FFFFFF,t_70" alt><br>下载完成后，运行</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sh cuda_10.1.168_418.67_linux.run</span><br></pre></td></tr></table></figure>

<p>即可进入安装界面<br>如果安装失败可以尝试减少安装选项</p>
<h1 id="二．cuDNN的安装"><a href="#二．cuDNN的安装" class="headerlink" title="二．cuDNN的安装"></a>二．cuDNN的安装</h1><p>安装cudnn需要在nvidia官网注册账号<br><a href="https://developer.nvidia.com/rdp/cudnn-download#a-collapse731-10" target="_blank" rel="noopener">https://developer.nvidia.com/rdp/cudnn-download#a-collapse731-10</a><br><img src="https://img-blog.csdnimg.cn/20190616162630715.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwNzMyMDkz,size_16,color_FFFFFF,t_70" alt><br>cudnn其实是一些加速CUDA性能的库，首先按照解压放到CUDA的相应路径中<br>然后把其中的lib64关联到环境变量当中</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit .bashrc</span><br></pre></td></tr></table></figure>

<p>在弹出的gedit文档编辑器（.bashrc中）中最后一行加入：<br>export LD_LIBRARY_PATH=/your/path/to/cuda/lib64:$LD_LIBRARY_PATH<br>重启环境变量</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> .bashrc</span><br></pre></td></tr></table></figure>

<h1 id="三．Pytorch1-0的安装"><a href="#三．Pytorch1-0的安装" class="headerlink" title="三．Pytorch1.0的安装"></a>三．Pytorch1.0的安装</h1><p>安装好cuda环境后我们开始安装pytorch1.0环境<br>1.python环境的安装<br>首先要装python环境，这里我选择的是直接安装anaconda，里面不仅有python，还有大量的科学包，会省去很多麻烦，（因为贸易战的原因，所以清华镜像站并不能下载，只能去官网耐心下载）<br>下载完成后运行.sh文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash Anaconda3-2019.03-Linux-x86_64.sh</span><br></pre></td></tr></table></figure>

<p>进入注册信息页面，输入yes；<br>阅读注册信息，然后输入yes；查看文件即将安装的位置，按enter，即可安装；<br>系统是自带python2.7的，可以修改环境变量使其启动的 python 为 anaconda</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit ~/.bashrc </span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">"/home/xupp/anaconda3/bin:<span class="variable">$PATH</span>"</span></span><br><span class="line">顺带提一下pip的 安装方法</span><br><span class="line">sudo apt-get install python3-pip</span><br></pre></td></tr></table></figure>

<p>2.pytorch的安装<br>这时我们就可以安装pytorch1.0了，直接去pytorch的官网<br><a href="https://pytorch.org/" target="_blank" rel="noopener">https://pytorch.org/</a><br>选择自己系统的配置（官网上并没有CUDA10.1，选择10.0即可）<br><img src="https://img-blog.csdnimg.cn/20190616162656690.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwNzMyMDkz,size_16,color_FFFFFF,t_70" alt><br>然后在终端中输入</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install pytorch torchvision cudatoolkit=10.0 -c pytorch</span><br></pre></td></tr></table></figure>

<p>即可安装pytorch1.0</p>
<h1 id="四．Caffe的安装"><a href="#四．Caffe的安装" class="headerlink" title="四．Caffe的安装"></a>四．Caffe的安装</h1><p>然后到了安装caffe的环节了<br>在caffe环节，如果按照CSDN上的大多数教程来安装会有很多的坑，因为他们都是下载caffe的源码，然后用cmake进行编译，对于ubuntu18.04来说，makefile里面实在需要改太多路径了，而且有一些函数库已经被代替或者淘汰，有人说源码编译是为了对caffe框架进行微调，在这里，我感觉他是得不偿失，因为微调框架这种需求对于我们这种不作特殊研究的人来说其实是很鸡肋的，所以我选择了caffe官网提供的第二种安装方式<br>对于Ubuntu（&gt; = 17.04）<br>安装预编译的Caffe<br>包括caffe本身在内的所有产品都包装在17.04及更高版本中。要安装预编译的Caffe包，只需执行此操作即可</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install caffe-cuda</span><br><span class="line">sudo apt build-dep caffe-cuda       <span class="comment"># dependencies for CUDA version</span></span><br></pre></td></tr></table></figure>

<p>第二条命令需要你修改sources.list</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/apt/sources.list</span><br></pre></td></tr></table></figure>

<p>然后把里面的deb-src的注释掉<br>然后最难办caffe环境就装好了，可以进入python，import caffe 如果没有报错，证明，caffe环境配置成功</p>
<h1 id="五．Opencv3-4的安装"><a href="#五．Opencv3-4的安装" class="headerlink" title="五．Opencv3.4的安装"></a>五．Opencv3.4的安装</h1><p>为了编译openpose的源码以及opencv3.4.6，我们需要安装cmake</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install cmake-qt-gui</span><br></pre></td></tr></table></figure>

<p>安装完成后直接用命令cmake-gui 就可以使用cmake了<br>首先我们必须编译好opencv3.4.6<br>在opencv官网<br><a href="https://opencv.org/opencv-3-4/" target="_blank" rel="noopener">https://opencv.org/opencv-3-4/</a><br>下载opencv3.4的压缩包<br>解压后到目录启动cmake</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake-gui</span><br></pre></td></tr></table></figure>

<p>如图配置<br><img src="https://img-blog.csdnimg.cn/20190616162725518.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwNzMyMDkz,size_16,color_FFFFFF,t_70" alt></p>
<p>然后点击Generate<br>安装完成后需要对系统相关环境变量进行配置：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/ld.so.conf.d/opencv.conf</span><br></pre></td></tr></table></figure>

<p>将以下内容添加到最后：<br>/usr/local/lib<br>接下来配置库：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ldconfig</span><br></pre></td></tr></table></figure>

<p>更改环境变量：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/bash.bashrc</span><br></pre></td></tr></table></figure>

<p>在文件后添加：</p>
<blockquote>
<p>PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/lib/pkgconfig<br>export PKG_CONFIG_PATH</p>
</blockquote>
<p>保存退出，在运行下面的例程之前，需要重新开启终端来使配置生效。</p>
<h1 id="六．Openpose的安装"><a href="#六．Openpose的安装" class="headerlink" title="六．Openpose的安装"></a>六．Openpose的安装</h1><p>现在开始安装openpose</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/CMU-Perceptual-Computing-Lab/openpose.git</span><br></pre></td></tr></table></figure>

<p>检查是否需要更新</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin master</span><br></pre></td></tr></table></figure>

<h1 id="七-安装cmake-gui"><a href="#七-安装cmake-gui" class="headerlink" title="七.安装cmake-gui"></a>七.安装cmake-gui</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install cmake-qt-gui </span><br><span class="line">下载模型</span><br><span class="line"><span class="built_in">cd</span> models</span><br><span class="line">./getModels.sh</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line">创建build文件</span><br><span class="line">mkdir build</span><br></pre></td></tr></table></figure>

<h1 id="八-启动cmake-gui进行编译"><a href="#八-启动cmake-gui进行编译" class="headerlink" title="八.启动cmake-gui进行编译"></a>八.启动cmake-gui进行编译</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake-gui</span><br></pre></td></tr></table></figure>

<p>填写openpose源码目录以及build，点击Configure按钮, 选择Unix Makefile和use default native compling，点击finish按钮<br><img src="https://img-blog.csdnimg.cn/20190616162757490.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwNzMyMDkz,size_16,color_FFFFFF,t_70" alt></p>
<p>点击Generate即可开始编译，编译完成后我们在openpose文件夹中执行</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./build/examples/openpose/openpose.bin --video examples/media/video.avi</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/201906161628345.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwNzMyMDkz,size_16,color_FFFFFF,t_70" alt><br>七．Pytorch模型的训练<br>在github中下载pytorch训练模型的代码<br><a href="https://github.com/NiteshBharadwaj/part-affinity" target="_blank" rel="noopener">https://github.com/NiteshBharadwaj/part-affinity</a><br>从COCO项目下载train2017.zip，val2017.zip和annotations_trainval2017.zip 关键点描述可在此处找到。提取文件夹并将其放在“/ data”中<br>然后运行</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python main.py -data ../data -expID vgg19 -model vgg -train</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20190616162921159.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwNzMyMDkz,size_16,color_FFFFFF,t_70" alt></p>
<p>模型在训练中<br>这里是通过迭代训练模型的，默认迭代150次，每次迭代都会加大模型的精度，我们这里迭代了三天训练出了29个模型<br> <img src="https://img-blog.csdnimg.cn/20190616162951725.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwNzMyMDkz,size_16,color_FFFFFF,t_70" alt><br>训练出来的29个模型</p>
<p>即可对视频中的人流进行人数统计</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">QUST-Coder</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://qustkx.com/2019/08/21/openpose/">http://qustkx.com/2019/08/21/openpose/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://qustkx.com">青岛科技大学信息学院科技创新协会</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/经验分享/">-经验分享    </a></div><div class="post_share"><div class="social-share" data-image="https://img-blog.csdnimg.cn/201906161628345.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwNzMyMDkz,size_16,color_FFFFFF,t_70" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull-left"><a href="/2019/09/07/qa/"><img class="prev_cover lozad" data-src="https://i.loli.net/2019/09/07/p9rTNGeUkaIRSOE.png" onerror="onerror=null;src='https://i.loli.net/2019/08/12/NpZmDsf8Q492uYb.png'"><div class="label">上一篇</div><div class="prev_info"><span>新生答疑会主要问题汇总</span></div></a></div><div class="next-post pull-right"><a href="/2019/08/17/blog5/"><img class="next_cover lozad" data-src="https://i.loli.net/2019/08/21/AHDJNTu58cfoLts.png" onerror="onerror=null;src='https://i.loli.net/2019/08/12/NpZmDsf8Q492uYb.png'"><div class="label">下一篇</div><div class="next_info"><span>图书搜索</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span>相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2019/08/10/compete/" title="让学长告诉你各类竞赛背后的故事"><img class="relatedPosts_cover lozad" data-src="https://i.loli.net/2019/08/12/NpZmDsf8Q492uYb.png"><div class="relatedPosts_title">让学长告诉你各类竞赛背后的故事</div></a></div></div><div class="clear_both"></div></div></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2009 - 2020 By QUST-Coder</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly"><span>Butterfly</span></a></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><section class="rightside" id="rightside"><i class="fa fa-book" id="readmode" title="阅读模式"> </i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换">简</a><i class="fa fa-moon-o nightshift" id="nightshift" title="夜间模式"></i></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/nightshift.js"></script><script id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zindex="-1" data-click="false"></script><script src="/js/tw_cn.js"></script><script>translateInitilization()

</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@1.2.2/instantpage.min.js" type="module"></script></body></html>